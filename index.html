<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë•í†¡ë°© ê³„ê¸‰ íŒë…ê¸° V2</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            background-color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 350px;
            position: relative; /* ìë™ì™„ì„± ëª©ë¡ ìœ„ì¹˜ ê¸°ì¤€ */
        }
        h1 {
            color: #333;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        /* ì…ë ¥ì°½ ë˜í¼ (ìœ„ì¹˜ ì¡ê¸°ìš©) */
        .input-wrapper {
            position: relative;
            width: 100%;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
        }
        input {
            width: 80%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        /* ìë™ì™„ì„± ëª©ë¡ ìŠ¤íƒ€ì¼ */
        .suggestions-list {
            position: absolute;
            top: 100%; /* ì…ë ¥ì°½ ë°”ë¡œ ì•„ë˜ */
            left: 50%;
            transform: translateX(-50%); /* ê°€ìš´ë° ì •ë ¬ */
            width: 85%; /* ì…ë ¥ì°½ë³´ë‹¤ ì‚´ì§ ë„“ê²Œ */
            background: white;
            border: 1px solid #ddd;
            border-radius: 0 0 5px 5px;
            max-height: 150px;
            overflow-y: auto;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 10;
            display: none; /* í‰ì†Œì—” ìˆ¨ê¹€ */
            text-align: left;
        }
        .suggestion-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
            color: #333;
        }
        .suggestion-item:hover {
            background-color: #f0f2f5;
        }
        .suggestion-item:last-child {
            border-bottom: none;
        }

        button {
            width: 88%;
            padding: 10px;
            background-color: #fee500;
            color: #3c1e1e;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background-color: #fdd835;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: #fafafa;
            display: none;
        }
        .level-emoji {
            font-size: 3rem;
            margin-bottom: 10px;
            display: block;
        }
        .level-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .stats {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ ë•í†¡ë°© ê³„ê¸‰ íŒë…ê¸°</h1>
    <p style="font-size: 0.9rem; color: #888; margin-bottom: 20px;">ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ì°¾ì•„ë“œë ¤ìš”!</p>
    
    <div class="input-wrapper">
        <input type="text" id="nicknameInput" placeholder="ë‹‰ë„¤ì„ ì…ë ¥ (ì¼ë¶€ë§Œ ì³ë³´ì„¸ìš”)" autocomplete="off">
        <div id="suggestions" class="suggestions-list"></div>
    </div>

    <button onclick="checkRank()">íŒë…í•˜ê¸°</button>

    <div id="resultBox" class="result">
        <span id="emoji" class="level-emoji"></span>
        <div id="levelTitle" class="level-title"></div>
        <div id="userStats" class="stats"></div>
    </div>
</div>

<script>
    const userData = {
      "ì„¸ì¢…í¬ë„": { "given": 6, "received": 5 },
      "ë•í†¡ë°©ëª°ì‚´í”„ë¡œì íŠ¸ë¨¸ì‹ ": { "given": 6, "received": 6 },
      "ë…¹ì²­": { "given": 22, "received": 10 },
      "ì†Œì¢…ì—¬(í•™ì‚¬ê²½ê³ ê²½ê³ )": { "given": 34, "received": 12 },
      "ë ˆë‹ˆë‹Œ": { "given": 1, "received": 9 },
      "ê¼¬ë§ˆì–´ìƒˆì‹ ": { "given": 1, "received": 12 },
      "ì—¬ì¤‘ìƒìŸ": { "given": 2, "received": 6 },
      "Ì”": { "given": 0, "received": 11 },
      "ëŒ€ì¤‘ë…¸": { "given": 1, "received": 4 },
      "Nongemini": { "given": 10, "received": 3 },
      "ì¹˜ì¦ˆ ê³ ë¥´ê¸°ì•„ìŠ¤": { "given": 1, "received": 1 },
      "ê¹€ì†¦ë¶• the ê¹€ì†¦ë¶•": { "given": 3, "received": 6 },
      "ì¿ ëª¨ë¡œì¦ˆ": { "given": 3, "received": 3 },
      "í† ì„±ì¸": { "given": 0, "received": 0 },
      "ìš°ë§ˆë£¨": { "given": 1, "received": 1 },
      "ê²½ì˜ë§˜(ë‹¤ì´ì–´íŠ¸, -3ì¼ì°¨)": { "given": 5, "received": 0 },
      "ê·¸ë¦¼ìŸì´": { "given": 2, "received": 1 },
      "ë§¤ì¼ë°¤ íê´€ ìˆ˜ë ¨ ë±ìƒˆ": { "given": 0, "received": 2 },
      "ëŒ€ë•ì‚¬": { "given": 9, "received": 2 },
      "ã…‡ã…‡(104.28)": { "given": 5, "received": 8 },
      "í˜ì´í¼": { "given": 2, "received": 1 },
      "ê°€ì¸ ë™(ê³§ë¨¹ìŒ)": { "given": 0, "received": 1 },
      "ì‹œí—˜ë§ë¦°í˜¸ë°•": { "given": 5, "received": 4 },
      "ì»´í‰(ìµœì •ì˜ˆ)": { "given": 0, "received": 0 },
      "ëŠ¥ì²­": { "given": 24, "received": 3 },
      "ì”ê¸° -9999ğŸ’€": { "given": 0, "received": 0 },
      "ë²„ê±°": { "given": 3, "received": 3 },
      "ë©˜í—¤ë¼í˜¸ì†Œì¸": { "given": 1, "received": 0 },
      "ë¬¼ë¦¬ê·¸ê²Œ ë­ì•¼": { "given": 2, "received": 1 },
      "rabbithouse": { "given": 0, "received": 1 },
      "ê´­": { "given": 0, "received": 2 },
      "ê²Œì„í‚¹(í•™ì‚¬ê²½ê³ ê²½ê³ )": { "given": 0, "received": 0 },
      "ëŒë‹¤,ì‹œì˜¨ì´ë‘ìƒì¼ê°™ìŒ": { "given": 0, "received": 0 },
      "M200is": { "given": 0, "received": 1 },
      "ë¥˜ì½”ì‚¬ë‘ë‹¨": { "given": 0, "received": 1 },
      "ì˜ì†¡ì´": { "given": 0, "received": 0 },
      "ë©”êµ¬ë° ì‚¬ë‘ë‹¨": { "given": 0, "received": 1 },
      "ì²´ë¦¬í”¼ì¸„": { "given": 2, "received": 1 },
      "ê±´ì¶•ì´ë­ì•¼(êµ°íœ´í•™)": { "given": 0, "received": 0 },
      "0": { "given": 0, "received": 0 },
      "53ì‚¬í•´ê¸°ë™ëŒ€thumbs up(ìƒë³‘)": { "given": 0, "received": 0 },
      "ì´ì‘": { "given": 0, "received": 0 },
      "E:Z": { "given": 0, "received": 0 },
      "ê³µë“€ë‹˜ë§Œë§Œì„¸": { "given": 0, "received": 0 },
      "ê°¤ë„´": { "given": 0, "received": 3 },
      "ì´ë¦¬ë‹¤ì—¬": { "given": 0, "received": 0 },
      "í™”ì„": { "given": 0, "received": 0 },
      "yuicraft": { "given": 0, "received": 0 },
      "í‡´ê³„ë™ê°ì": { "given": 0, "received": 0 },
      "ì•„ë£¨ë‹´ë‹¹ì¼ì§„": { "given": 0, "received": 0 },
      "â™¥ì˜¤íƒ€ì¿ ì§€ë§ìƒâ™¥": { "given": 0, "received": 0 },
      "201 ì‹ ì†ëŒ€ì‘ì—¬ë‹¨(ë“œë¡ ìš´ìš©/ì •ë¹„)": { "given": 0, "received": 0 },
      "irisuki": { "given": 0, "received": 0 },
      "lunedRB": { "given": 0, "received": 0 },
      "ìì¹­ì• ê°¤ì•„ì´ëŒìœ ìˆ˜ë°•": { "given": 0, "received": 0 },
      "ì•„ë„ì•„ë²”": { "given": 0, "received": 0 },
      "ì—„ì§€ì²™ ì–´í”¼ì¹˜": { "given": 0, "received": 0 },
      "ë•…ê±°ë¯¸": { "given": 0, "received": 0 },
      "ë°¥ë°”ë°¥": { "given": 0, "received": 0 },
      "í•˜ìš”ë¦¬": { "given": 0, "received": 0 },
      "AD": { "given": 0, "received": 0 },
      "u2u2": { "given": 0, "received": 0 },
      "ì§€ë¸Œë¦¬ë§Œì·¨ê¸‰í•¨": { "given": 0, "received": 0 },
      "ì•„ì•¼ìŠ¤íƒ•ìŠ¤": { "given": 0, "received": 0 },
      "ë©”êµ¬ë°ëƒ¥/í™ë§ˆì¡±": { "given": 0, "received": 0 },
      "í™”ë‚œ ìŠ¤ì¹´í”¼": { "given": 0, "received": 0 },
      "ì•„ì¦ˆë ì²˜ëŒì´": { "given": 0, "received": 0 },
      "ë‚˜ë¥¸í•œ ë‹ˆë‹ˆì¦ˆ": { "given": 0, "received": 0 },
      "í•˜ì´": { "given": 0, "received": 1 },
      "PKBM": { "given": 0, "received": 0 },
      "ë„ë„›": { "given": 0, "received": 0 },
      "ê·¹ì•…ë¬´ë„í•œë¸”ì•„ì• í˜¸ê°€": { "given": 0, "received": 0 },
      "ëˆˆë¬¼ë°”ë‹¤ì— ë¹ ì§„ ë¼ì´ì–¸": { "given": 0, "received": 0 },
      "ë²™ì° íŠœë¸Œ": { "given": 0, "received": 0 },
      "ììœ ": { "given": 0, "received": 0 },
      "ì´ˆì¡¸": { "given": 0, "received": 1 },
      "ë§ˆì´í¬ë¥¼ ë“  ë¼ì´ì–¸": { "given": 0, "received": 0 },
      "í”„ë¦¬ë Œ": { "given": 0, "received": 0 },
      "ã…ã…‡": { "given": 0, "received": 0 },
      "ëˆ ë¿Œë¦¬ëŠ” ë¼ì´ì–¸": { "given": 0, "received": 0 },
      "Zizzang": { "given": 0, "received": 0 },
      "SWN": { "given": 0, "received": 0 },
      "ëŒë§¹ì´": { "given": 0, "received": 0 },
      "ë§›ë™ì‚°": { "given": 0, "received": 0 },
      "ì„¸ë¯¸ë‚˜ë…¸ì•„": { "given": 0, "received": 0 },
      "ì”¹ë• ë…¸ë˜ ë“£ëŠ” ìŠ¬ë¼ì„": { "given": 0, "received": 0 }
    };

    const userNames = Object.keys(userData);
    const inputField = document.getElementById('nicknameInput');
    const suggestionsBox = document.getElementById('suggestions');

    // 1. ì…ë ¥ ê°ì§€ ë° ìë™ì™„ì„± ëª©ë¡ í‘œì‹œ
    inputField.addEventListener('input', function() {
        const value = this.value.toLowerCase();
        suggestionsBox.innerHTML = ''; // ëª©ë¡ ì´ˆê¸°í™”

        if (!value) {
            suggestionsBox.style.display = 'none';
            return;
        }

        // ì…ë ¥í•œ ê¸€ìê°€ í¬í•¨ëœ ë‹‰ë„¤ì„ ì°¾ê¸°
        const matches = userNames.filter(name => name.toLowerCase().includes(value));

        if (matches.length > 0) {
            matches.forEach(match => {
                const div = document.createElement('div');
                div.className = 'suggestion-item';
                div.textContent = match;
                
                // í•­ëª© í´ë¦­ ì‹œ ì…ë ¥ì°½ì— ë„£ê¸°
                div.onclick = function() {
                    selectName(match);
                };
                
                suggestionsBox.appendChild(div);
            });
            suggestionsBox.style.display = 'block';
        } else {
            suggestionsBox.style.display = 'none';
        }
    });

    // 2. ë‹‰ë„¤ì„ ì„ íƒ í•¨ìˆ˜
    function selectName(name) {
        inputField.value = name;
        suggestionsBox.style.display = 'none';
        checkRank(); // ì„ íƒí•˜ìë§ˆì ë°”ë¡œ ê²°ê³¼ ë³´ì—¬ì£¼ê¸° (ì˜µì…˜)
    }

    // 3. ì™¸ë¶€ í´ë¦­ ì‹œ ëª©ë¡ ë‹«ê¸°
    document.addEventListener('click', function(e) {
        if (!inputField.contains(e.target) && !suggestionsBox.contains(e.target)) {
            suggestionsBox.style.display = 'none';
        }
    });

    // 4. ê³„ê¸‰ íŒë… ë¡œì§ (ê¸°ì¡´ê³¼ ë™ì¼)
    function checkRank() {
        const inputName = inputField.value.trim();
        const resultBox = document.getElementById('resultBox');
        const emojiSpan = document.getElementById('emoji');
        const titleDiv = document.getElementById('levelTitle');
        const statsDiv = document.getElementById('userStats');

        if (!inputName) {
            alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
            return;
        }

        const user = userData[inputName];

        if (!user) {
            alert("ë°ì´í„°ì— ì—†ëŠ” ë‹‰ë„¤ì„ì…ë‹ˆë‹¤. ìë™ì™„ì„± ëª©ë¡ì„ ëˆŒëŸ¬ë³´ì„¸ìš”!");
            resultBox.style.display = 'none';
            return;
        }

        const given = user.given;
        const received = user.received;
        let levelTitle = "";
        let levelEmoji = "";

        // ë ˆë²¨ ë¡œì§
        if (given <= 1 && received <= 1) {
            levelTitle = "Level 0. ìœ ë ¹ ë˜ëŠ” ì‹ ì…";
            levelEmoji = "ğŸ‘»";
        } else {
            let ratio = 0;
            if (given === 0) {
                ratio = 9999; 
            } else {
                ratio = received / given;
            }

            if (ratio >= 3) {
                levelTitle = "Level 1. ìŒ€í‚¹";
                levelEmoji = "ğŸ«…";
            } else if (ratio >= 2) {
                levelTitle = "Level 2. ìŒ€ìˆ­ì´";
                levelEmoji = "ğŸµ";
            } else if (ratio > 0.5) {
                levelTitle = "Level 3. í‰ë¯¼";
                levelEmoji = "ğŸ‘¤";
            } else if (ratio > 0.33333) {
                levelTitle = "Level 4. ì²œì‚¬";
                levelEmoji = "ğŸ˜‡";
            } else {
                levelTitle = "Level 5. ì‚°íƒ€í´ë¡œìŠ¤";
                levelEmoji = "ğŸ…";
            }
        }

        emojiSpan.textContent = levelEmoji;
        titleDiv.textContent = levelTitle;
        statsDiv.textContent = `(ìœ íšŸìˆ˜: ${given}íšŒ / ë°›ì€ íšŸìˆ˜: ${received}íšŒ)`;
        resultBox.style.display = 'block';
    }

    inputField.addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            // ìë™ì™„ì„± ëª©ë¡ì´ ë– ìˆë‹¤ë©´ ì²« ë²ˆì§¸ í•­ëª© ì„ íƒ, ì•„ë‹ˆë©´ íŒë…
            if (suggestionsBox.style.display === 'block' && suggestionsBox.firstChild) {
                selectName(suggestionsBox.firstChild.textContent);
            } else {
                checkRank();
            }
        }
    });
</script>

</body>
</html>
